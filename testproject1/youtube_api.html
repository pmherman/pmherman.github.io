<!DOCTYPE html>
<html>
<head>
	<title>YouTube Test</title>
	<script type="text/javascript">

		var OAUTH2_CLIENT_ID = 'AIzaSyAwbv5Uageg_qwYxm898r4e4Eh5eEP6LjU';
		var OAUTH2_SCOPES = ['https://www.googleapis.com/auth/youtube'];

		googleApiClientReady = function() {
  			gapi.auth.init(function() {
   			window.setTimeout(checkAuth, 1);
  			});
		}

		function checkAuth() {
		  gapi.auth.authorize({
		    client_id: OAUTH2_CLIENT_ID,
		    scope: OAUTH2_SCOPES,
		    immediate: true
		  }, handleAuthResult);
		}

		function handleAuthResult(authResult) {
		  if (authResult && !authResult.error) {
		  	console.log(authResult);
		    $('.pre-auth').hide();
		    $('.post-auth').show();
		    loadAPIClientInterfaces();
		  } else {
		    // Make the #login-link clickable. Attempt a non-immediate OAuth 2.0
		    // client flow. The current function is called when that flow completes.
		    $('#login-link').click(function() {
		      gapi.auth.authorize({
		        client_id: OAUTH2_CLIENT_ID,
		        scope: OAUTH2_SCOPES,
		        immediate: false
		        }, handleAuthResult);
		    });
		  }
		}

		function loadAPIClientInterfaces() {
		  gapi.client.load('youtube', 'v3', function() {
		    handleAPILoaded();
		  });
		}

		// After the API loads, call a function to enable the search box.
		function handleAPILoaded() {
		  $('#search-button').attr('disabled', false);
		}

		// Search for a specified string.
		function search() {
		  var q = $('#query').val();
		  var request = gapi.client.youtube.search.list({
		    q: q,
		    part: 'snippet'
		  });

		  request.execute(function(response) {
		    var str = JSON.stringify(response.result);
		    $('#search-container').html('<pre>' + str + '</pre>');
		  });
		}

		checkAuth();
		handleAuthResult();
		loadAPIClientInterfaces();
		handleAPILoaded();
		

	
	</script>
</head>
<body>
    <div id="buttons">
		
    </div>
    <div id="search-container">
    </div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>	

</body>
</html>